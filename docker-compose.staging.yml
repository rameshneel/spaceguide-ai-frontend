# Staging docker-compose override (Customer/Client Testing)
# Usage: docker-compose -p spaceguide-frontend-staging -f docker-compose.yml -f docker-compose.staging.yml up -d

services:
  # React Frontend - Staging
  frontend:
    container_name: spaceguide-ai-frontend-staging
    restart: unless-stopped
    ports:
      - "3002:80" # Different port from dev (3000) and prod (3001)
    build:
      args:
        VITE_API_URL: ${VITE_API_URL:-http://localhost:5002/api}
        VITE_STRIPE_PUBLISHABLE_KEY: ${VITE_STRIPE_PUBLISHABLE_KEY:-}
        VITE_APP_NAME: ${VITE_APP_NAME:-SpaceGuideAI}
        VITE_APP_VERSION: ${VITE_APP_VERSION:-1.0.0}
    environment:
      - NGINX_HOST=localhost
      - NGINX_PORT=80
    env_file:
      - ./.env.staging
    volumes:
      # Optional: Mount static files from host (for staging)
      # Uncomment below if you want to serve files from host filesystem
      # - ./dist:/usr/share/nginx/html:ro
    networks:
      - frontend-network-staging
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  # No volumes needed for frontend (static files in image)
  # Volumes are optional - files are built into Docker image by default

networks:
  frontend-network-staging:
    driver: bridge
